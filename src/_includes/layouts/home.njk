---
layout: layouts/base.njk
templateClass: tmpl-home
---

<link href="//cdn-images.mailchimp.com/embedcode/classic-061523.css" rel="preload" as="style">
<link href="//cdn-images.mailchimp.com/embedcode/classic-061523.css" rel="stylesheet" type="text/css">
<style>
{% include "styles/home.css" %}
</style>
{# The Home page uses this template–it extends the base template #}
<div class="top-banner">
  <video class="video-banner" muted playsinline autoplay loop poster="https://public-unlock.nyc3.digitaloceanspaces.com/unlock-homevid-poster.png">
    <source src="https://public-unlock.nyc3.cdn.digitaloceanspaces.com/hero.webm" type="video/webm">
    <source src="https://public-unlock.nyc3.cdn.digitaloceanspaces.com/hero.mp4" type="video/mp4">
  </video>
  <div class="banner-wrapper" style="position: relative; z-index: 2;">
    <div class="banner-content">
      <h1>
        {{ bannerTitle }}
      </h1>
      <h2>
        {{ bannerText }}
      </h2>
      <a href="/start">
        <button class="yellow">
            Get started
        </button>
      </a>
    </div>
  </div>
</div>
<div class="content">
  {% include 'layouts/blocks50.njk' %}
</div>
  {% include 'layouts/home-slider.njk' %}
<div class="content latest-action">
  <div class="half-wide">
    <h3 style="margin-top: 0;">
      {{ latestBanner }}
    </h3>
    <p>
      {{ latestActionText }}
    </p>
    <p>
        {% if latestActionButton == 'yes' %}
        <a href="{{ latestActionLink }}">
          <button class="black">
            Learn More
          </button>
        </a>
        {% endif %}
    </p>
  </div>
  <div class="center-stage">
    <img src="{{ latestActionImage }}" alt="{{ latestAlt }}" style="width: 100%;">
  </div>
  <p style="text-align: center; margin-top: 20px; margin-bottom: 0;">{{ actionCaption }}</p>
</div>
<div class="banner-full bg-cream">
  <div class="page-content-50-50">
    <div id="team-wrap">
      <img src="{{ teamImage }}" alt="{{ teamAlt }}" style="object-fit: cover; max-width: 100%; margin-top: -15px;">
    </div>
    <div style="padding: 5%; text-align: left;">
      <h4>
        {{ teamTitle }}
      </h4>
      <p class="black">
        {{ teamText }}
      </p>
      <a href="/about">
        <button>
            Learn more
        </button></a>
      <!--<a href="/get-involved">
        <button>
            Get involved
        </button>
      </a>-->
    </div>
  </div>
</div>
<div class="banner-full bg-orange last-banner">
  <h3>
    Unlock news, tips, and more!
  </h3>
  <p class="black">
      Subscribe below for occasional updates about what's new at Unlock NYC.
  </p>
  <form action="https://unlock-email-auto-9204.twil.io/add-newsletter-contact" method="POST" id="newsletter-form">
    <label for="email">Your email*</label>
    <input
      type="email"
      id="email"
      name="email"
      placeholder="me@me.com"
      required
    >

    <label for="first_name">First name (optional)</label>
    <input
      type="text"
      id="first_name"
      name="first_name"
    >

    <!-- Honeypot field: hidden from humans -->
    <div style="position: absolute; left: -9999px;" aria-hidden="true">
      <label for="company">Company</label>
      <input
        type="text"
        id="company"
        name="company"
        tabindex="-1"
        autocomplete="off"
      >
    </div>

    <button type="submit" class="black">Sign Up</button>
  </form>
  <div id="thanks-message" style="display:none;">✅ Thanks for signing up!</div>
</div>

<!-- NETLIFY advocate login-->
<script type="text/javascript" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
<script>
  function checkIdentity() {
      let token = JSON.parse(localStorage.getItem("gotrue.user"));
      if (token) {
          if (token.app_metadata.roles[0] == "advocate") {
              return true;
          } else {
              return false;
          }
      }
  }
  // netlify identity, advocate confirmation flow
  let confirmation = window.location.hash;
  let loginAttempt = false;
  if (confirmation.indexOf("confirmation") > -1) {
      loginAttempt = true;
      // console.log("advocate confirmation: " + loginAttempt);
  }

  // netlify widget
  const user = netlifyIdentity.currentUser();
  netlifyIdentity.on('init', user => console.log('init', user));
  netlifyIdentity.on('login', function (user) {
      // console.log('login', user);
  });

</script>
<!-- NEWSLETTER FORM ACTION -->
<script>
$('#newsletter-form').on('submit', async (e) => {
  e.preventDefault(); // stop full page reload
  const payload = Object.fromEntries(new FormData(e.target));
  const response = await fetch(e.target.action, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(payload)
  });

  if (response.ok) {
   $("#thanks-message").show();
   $("form#newsletter-form").hide();
    e.target.reset();
  }
});
</script>